<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Home Page</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link href="/public/css/styles.css" rel="stylesheet" type="text/css">

</head>
<body>
  
  <%- include('../partials/homeHeader'); %>
  <% if(messages.success){%>
    <ul class="alert alert-success text-center">
      <li><%=messages.success%>
        <button type="button" class="btn-close float-end" data-bs-dismiss="alert" aria-label="Close"></button>
      </li>
      
    </ul>
    <% } %>
    <% if(messages.error){%>
        <ul class="alert alert-danger text-center">
          <li><%=messages.error%>
            <button type="button" class="btn-close float-end" data-bs-dismiss="alert" aria-label="Close"></button>
          </li>
        </ul>
        <% } %>

        <% if(productsinDb!=""){%>
          <div class="products" id="products">
           
                <% const displayUI=productsinDb.forEach((productsData)=>{ %>
                  <div class="product">
                    
                      <img src="<%=productsData.productImage %>" alt="cover">
                      
                      
                      <% if (typeof productsData.productName === 'string') { %>
                        <% if (productsData.productName.length > 12) { %>
                          <h2>  <%= productsData.productName.substring(0, 12) %>...</h2> <!-- Displaying first 12 characters -->
                        <% } else { %>
                          <h2><%=productsData.productName%></h2>
                        <% } %>
                        <% } %>



                      <strong><%=productsData.category %></strong>
                      <p style="color: white;">Rs. <%=productsData.price %></p>
                      <form action="/home/addtocart/<%=userFind._id %>/<%=productsData._id %>" method="POST">
                        <button type="submit" class="btn btn-outline-warning" style="transform: translateX(-60px)">
                          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-cart-plus" viewBox="0 0 16 16">
                            <path d="M9 5.5a.5.5 0 0 0-1 0V7H6.5a.5.5 0 0 0 0 1H8v1.5a.5.5 0 0 0 1 0V8h1.5a.5.5 0 0 0 0-1H9z"/>
                            <path d="M.5 1a.5.5 0 0 0 0 1h1.11l.401 1.607 1.498 7.985A.5.5 0 0 0 4 12h1a2 2 0 1 0 0 4 2 2 0 0 0 0-4h7a2 2 0 1 0 0 4 2 2 0 0 0 0-4h1a.5.5 0 0 0 .491-.408l1.5-8A.5.5 0 0 0 14.5 3H2.89l-.405-1.621A.5.5 0 0 0 2 1zm3.915 10L3.102 4h10.796l-1.313 7zM6 14a1 1 0 1 1-2 0 1 1 0 0 1 2 0m7 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0"/>
                          </svg>
                          Add to Cart</button>
                    </form>
                    <button type="button" style="transform: translateY(-39px) translateX(70px)" class="btn btn-outline-info" onclick="location.href = '/home/viewmore/<%=userFind._id %>/<%=productsData._id %>';" >View more..</button> 
                  </div>
              <% }) %>
              <script>
                const container=document.getElementById('products')
                container.innerHTML=displayUI.join("")
                
              </script>
             
               
             
          </div>
            <% }else{%>
              <div class="mt-5 ">
                <h2 class="text-danger bg-white">Oops! Nothing in your Products. Contact Admin.</h2>
                  <img class="boredGif mx-auto my-auto d-block" src="https://media0.giphy.com/media/U2QnYDA9uhUgyH1CAH/giphy.gif?cid=6c09b952oxdlu12ynfvj8fwr35ctvjsb7tg6m1f1kw0gwik3&ep=v1_internal_gif_by_id&rid=giphy.gif&ct=s" alt="">
                </div>
             
              <% }%>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
  
    </div>
      
</body>

</html>











 
      