<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Cart</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link href="/public/css/styles.css" rel="stylesheet" type="text/css">
    
</head>
<body>
    <div>
        <%- include('../partials/homeHeader'); %>
        
  <% if(messages.success){%>
    <ul class="alert alert-success text-center">
      <li><%=messages.success%>
        <button type="button" class="btn-close float-end" data-bs-dismiss="alert" aria-label="Close"></button>
      </li>
    </ul>
    <% } %>
        <% if (products.length > 0) { %>
        <div class="myCart mx-auto" style="width:1200px; ">           
        <h1 class="text-center">Cart Items</h1>
        <br><br>
    <table class="table  table-sm table-info table-striped table-bordered border-warning">
        <thead class="table table-warning text-center">
            <tr>
                <th>Product</th>
                <th>Price</th>
                <th>Category</th>
                <th>Remove from Cart</th>
                <th>Proceed to pay</th>
            </tr>
        </thead>
        <tbody>
            <% products.forEach((productsData, index) => { %>
                <tr>
                    <td>
                        <img class="rounded mx-auto d-block" src="<%= productsData.productImage %>" style="height: 250px; width: 180px;"alt="cover">
                        <br><strong class="bg-transparent text-black"><%= productsData.productName %></strong>
                    </td>
                    
                    <td>Rs. <%= productsData.price %></td>
                    <td><%= productsData.category %></td>
                    <td class="text-center">
                        <a class="nav-link active delete-link" aria-current="page" onMouseOver="this.style.color='red'"
                        onMouseOut="this.style.color='black'" data-id="<%= productsData._id %>" href="/delete/cartItem/<%=userId %>/<%=productsData._id %>/<%= index %>">
                            <svg class="delete" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-archive-fill" viewBox="0 0 16 16">
                        <path d="M12.643 15C13.979 15 15 13.845 15 12.5V5H1v7.5C1 13.845 2.021 15 3.357 15zM5.5 7h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1 0-1M.8 1a.8.8 0 0 0-.8.8V3a.8.8 0 0 0 .8.8h14.4A.8.8 0 0 0 16 3V1.8a.8.8 0 0 0-.8-.8z"/>
                            </svg></a>
                    </td>
                    <td class="text-center">
                        <button type="button " class="btn btn-outline-success" onclick="location.href = '/home/purchase/<%=userFind._id %>/<%=productsData._id %>';" >Order Now</button> 
                    </td>
                </tr>
            <% }); %>
        </tbody>
    </table>
    <br><br><br>
    <% } else { %>
        <div class="mt-5 ">
            <h2 class="text-danger bg-white">Looks like you haven't added anything in your Cart. Keep Shopping.</h2>
              <img class="emptycartGif mx-auto my-auto d-block" src="https://miro.medium.com/v2/resize:fit:1100/1*D-ZiKd0B00tdifaB2X3tKQ.gif" alt="">
            </div>
    <% } %>
</div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    </div>
</body>
</html>
