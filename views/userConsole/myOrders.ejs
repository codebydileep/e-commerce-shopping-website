<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Orders</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link href="/public/css/styles.css" rel="stylesheet" type="text/css">
    
</head>
<body>
    <div>
        <%- include('../partials/homeHeader'); %>
        
  <% if(messages.success){%>
    <ul class="alert alert-success text-center">
      <li><%=messages.success%>
        <button type="button" class="btn-close float-end" data-bs-dismiss="alert" aria-label="Close"></button>
      </li>
    </ul>
    <% } %>
    
        <% if (orders.length > 0) { %>
        <div class="myOrders mx-auto" style="width:1200px; ">           
        <h1 class="text-center">My Orders</h1>
        <br><br>
    <table class="table  table-sm table-info table-striped table-bordered border-warning">
        <thead class="table table-warning text-center">
            <tr>
                <th>Product</th>
                <th>Price</th>
                <th>Payment</th>
                <th>Delivery Address</th>
                <th>Estimated Delivery Date</th>
                
            </tr>
        </thead>
        <tbody>
            <% orders.forEach((order, index) => { %>
                <tr class="text-center">
                    <td>
                        <img class="rounded mx-auto d-block" src="<%= order.product.productImage %>" style="height: 250px; width: 180px;"alt="cover">
                        <br><strong class="bg-transparent text-black"><%= order.product.productName %></strong>
                    </td>
                    <td>Rs. <%= order.product.price %></td>                   
                    <td>Cash On Delivery</td>
                    <td> <%= order.address %></td>
                    
                    <%
                    // Get the current date
                    var currentDate = new Date();
                    
                    // Add one week to the current date
                    var deliveryDate = new Date(currentDate.getTime() + 7 * 24 * 60 * 60 * 1000);
                    
                    // Format the delivery date in dd-mm-yyyy format
                    var formattedDeliveryDate = deliveryDate.getDate() + '-' + (deliveryDate.getMonth() + 1) + '-' + deliveryDate.getFullYear();
                    %>
                    <td><%= formattedDeliveryDate %></td>

                   
                </tr>
            <% }); %>
        </tbody>
    </table>
    <br><br><br>
    <% } else { %>
        <div class="mt-5 ">
            <h2 class="text-danger bg-white">You haven't ordered anything yet. Keep shopping.</h2>
              <img class="emptyorderGif mx-auto my-auto d-block" src="https://miro.medium.com/v2/resize:fit:1100/1*D-ZiKd0B00tdifaB2X3tKQ.gif" alt="">
            </div>
    <% } %>
</div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    </div>
</body>
</html>
